@use 'sass:color';
@use 'sass:list';
@use 'sass:math';

@use 'variable' as *;


@function f_clamp($value, $min: $min-linear, $max: $max-linear) {
  @return math.min(math.max($value, $min), $max);
}


@function linear_individual($input) {
  $value                          : f_clamp(($input / $max-rgb));
  $condition                      : ($value < $gamma-expanded);
  $true                           : ($value / $standard-phi);
  $false                          : (math.pow(($value + $alpha-min) / $alpha-max, $linear-gamma));

  @return if($condition, $true, $false);
}


@function linear($color) {
  $red                            : linear_individual(color.red($color));
  $green                          : linear_individual(color.green($color));
  $blue                           : linear_individual(color.blue($color));

  @return $red, $green, $blue;
}


@function gamma_individual($input) {
  $value                          : f_clamp(($input / $max-rgb));
  $condition                      : ($value > $gamma-compressed);
  $true                           : ($alpha-max * math.pow($value, (1 / $linear-gamma)) - $alpha-min);
  $false                          : ($standard-phi * $value);

  @return if($condition, $true, $false);
}
